(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-731ec5f2"],{"3ad8":function(t,a,o){},"6ba0":function(t,a,o){"use strict";o.r(a);var i=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("van-nav-bar",{attrs:{title:"书籍详情","left-text":"返回",fixed:!0},on:{"click-left":t.toback}}),o("div",{staticClass:"book-name clearfix"},[o("div",{staticClass:"name-img fl"},[o("img",{staticClass:"auto-img",attrs:{src:t.bookData.cover,alt:""}})]),o("div",{staticClass:"name-msg fl"},[o("div",{staticClass:"one-text"},[t._v(t._s(t.bookData.title))]),o("div",[t._v(t._s(t.bookData.author))]),o("div",[o("span",[t._v(t._s(t.bookData.majorCate))]),o("span",[t._v("|")]),o("span",[t._v("连载")])])])]),o("div",{staticClass:"book-massage clearfix"},[t._m(0),t._m(1),o("div",{staticClass:"fl"},[o("div",[t._v(t._s(t.bookData.totalFollower))]),o("div",[t._v("人气值")])]),o("div",{staticClass:"fl"},[o("div",[t._v(t._s(t.bookData.wordCount))]),o("div",[t._v("字数")])])]),o("div",{staticClass:"book-info"},[t._v(" "+t._s(t.bookData.longIntro)+" ")]),o("div",{staticClass:"book-last clearfix"},[o("div",{staticClass:"fl"},[t._v("目录")]),o("div",{staticClass:"fl last-center one-text"},[t._v(t._s(t.bookData.lastChapter))]),o("div",{staticClass:"fr"},[t._v(t._s(t.bookData.updated)+"更新")])]),t.isShow?t._e():o("div",{staticClass:"book-author"},[o("div",{staticClass:"author-title"},[t._v("作者其他书籍")]),o("div",{staticClass:"author-list"},t._l(t.authorData,(function(a,i){return o("div",{key:i,staticClass:"author-list-one clearfix",on:{click:function(o){return t.getBook(a._id)}}},[o("div",{staticClass:"fl author-img"},[o("img",{staticClass:"auto-img",attrs:{src:a.cover,alt:""}})]),o("div",{staticClass:"fl author-msg"},[o("div",[t._v(t._s(a.title))]),o("div",[t._v(t._s(a.author))]),o("div",[t._v("dasdsddsadsadsads")])]),o("div",{staticClass:"fr author-see"},[t._v(" 查看 ")])])})),0),o("div",{staticClass:"author-bottom"},[t._v(" 查看更多同作者作品 ")])]),o("div",{staticClass:"you-like"},[o("div",{staticClass:"author-title"},[t._v("你可能感兴趣的书")]),o("div",{staticClass:"like-list"},[o("div",{ref:"widthH",staticClass:"like-list-width clearfix"},t._l(t.likeData,(function(a,i){return o("div",{key:i,staticClass:"like-list-one fl",on:{click:function(o){return t.getBook(a._id)}}},[o("div",[o("img",{staticClass:"auto-img",attrs:{src:a.cover,alt:""}})]),o("div",{staticClass:"one-text"},[t._v(" "+t._s(a.title)+" ")]),o("div",[t._v(" "+t._s(a.author)+" ")])])})),0)])]),o("div",{staticClass:"book-fixed"},[o("div",{staticClass:"fl",class:{active:t.rack},on:{click:t.addRack}},[t._v(t._s(t.rack?t.addrack.torack:t.addrack.outrack))]),o("div",{staticClass:"fl",on:{click:function(a){return t.go()}}},[t._v("开始阅读")])])],1)},s=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"fl"},[o("div",[t._v("7.9")]),o("div",[o("span",[t._v("5000")]),o("span",[t._v("人评论")])])])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"fl"},[o("div",[t._v("1.5万")]),o("div",[t._v("阅读过")])])}],e=(o("c975"),o("fb6a"),{data:function(){return{id:"",bookData:[],isShow:"",authorData:[],allauthorData:[],likeData:[],addrack:{torack:"已加入书架",outrack:"加入书架"},rack:!1}},created:function(){this.id=this.$route.query.id,this.getBook(this.id)},methods:{isRack:function(){var t=localStorage.valueOf(),a="rackList"+this.bookData._id,o=[];for(var i in t)o.push(i);-1==o.indexOf(a)?this.rack=!1:this.rack=!0},addRack:function(){this.rack||(localStorage.setItem("rackList"+this.bookData._id,JSON.stringify(this.bookData)),this.rack=!0)},go:function(){this.$router.push({name:"Bookmsg",query:{id:this.bookData._id,title:this.bookData.title}})},imgKey:function(t){return unescape(t).slice(7)},getBook:function(t){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"book-info/"+t}).then((function(t){a.$toast.clear(),t.data.cover=a.imgKey(t.data.cover),t.data.updated=t.data.updated.slice(0,10),t.data.wordCount=t.data.wordCount>1e4?String(t.data.wordCount).slice(0,String(t.data.wordCount).length-4)+"万":t.data.wordCount,t.data.totalFollower=t.data.totalFollower>1e4?String(t.data.totalFollower).slice(0,String(t.data.totalFollower).length-4)+"万":t.data.totalFollower,a.bookData=t.data,a.getreview(a.bookData.author),a.getLike(a.bookData._id),a.isRack()})).catch((function(t){a.$toast.clear()}))},getreview:function(t){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/author-books?author="+t}).then((function(t){if(a.$toast.clear(),a.authorData=[],0!=t.data.books.length){for(var o=0;o<t.data.books.length;o++)t.data.books[o].cover=a.imgKey(t.data.books[o].cover);a.allauthorData=t.data.books;for(var i=0;i<3;i++)a.authorData.push(t.data.books[i])}else a.isShow=!0})).catch((function(t){a.$toast.clear()}))},toback:function(){this.$router.go(-1)},getLike:function(t){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/recommend/"+t}).then((function(t){a.$toast.clear(),a.$refs.widthH.style.width=86*t.data.books.length+10+"px";for(var o=0;o<t.data.books.length;o++)t.data.books[o].cover=a.imgKey(t.data.books[o].cover);a.likeData=t.data.books})).catch((function(t){a.$toast.clear()}))}}}),r=e,c=(o("c0cd"),o("2877")),l=Object(c["a"])(r,i,s,!1,null,"00545b9f",null);a["default"]=l.exports},a640:function(t,a,o){"use strict";var i=o("d039");t.exports=function(t,a){var o=[][t];return!!o&&i((function(){o.call(null,a||function(){throw 1},1)}))}},c0cd:function(t,a,o){"use strict";var i=o("3ad8"),s=o.n(i);s.a},c975:function(t,a,o){"use strict";var i=o("23e7"),s=o("4d64").indexOf,e=o("a640"),r=o("ae40"),c=[].indexOf,l=!!c&&1/[1].indexOf(1,-0)<0,d=e("indexOf"),n=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!d||!n},{indexOf:function(t){return l?c.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-731ec5f2.88d211b7.js.map